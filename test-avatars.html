<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avatar Test - KeyRacer</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(0, 194, 255, 0.3);
        }
        
        .avatar-demo {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 10px 0;
        }
        
        .demo-button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .demo-button:hover {
            background: var(--primary-color);
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="header-content">
            <div class="logo-section">
                <img src="assets/images/logo.png" alt="Key Racer Logo" class="logo-img">
            </div>
            
            <nav class="main-nav">
                <a href="index.html" class="nav-item"><i class="fas fa-home"></i> Home</a>
                <a href="lessons.html" class="nav-item"><i class="fas fa-graduation-cap"></i> Training</a>
                <a href="typing-tips.html" class="nav-item"><i class="fas fa-lightbulb"></i> Tips</a>
                <a href="leaderboard.html" class="nav-item"><i class="fas fa-trophy"></i> Championship</a>
                <a href="about.html" class="nav-item"><i class="fas fa-info-circle"></i> About</a>
            </nav>
            
            <div class="header-actions">
                <a href="preference.html" class="pref-btn"><i class="fas fa-cog"></i> Preference</a>
                <a href="login.html" id="loginBtn" class="nav-item"><i class="fas fa-sign-in-alt"></i> Login</a>
                <a href="#" id="logoutBtn" class="nav-item" style="display: none;"><i class="fas fa-sign-out-alt"></i> Logout</a>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="test-container">
        <h1>Avatar Implementation Test</h1>
        
        <div class="test-section">
            <h2>Current Avatar Display</h2>
            <p>The header above shows the current avatar implementation based on localStorage data.</p>
        </div>
        
        <div class="test-section">
            <h2>Test Different User Types</h2>
            <button class="demo-button" onclick="testGuestUser()">Test Guest User</button>
            <button class="demo-button" onclick="testGoogleUser()">Test Google User</button>
            <button class="demo-button" onclick="testGoogleUserWithAvatar()">Test Google User with Avatar</button>
            <button class="demo-button" onclick="testRegularUser()">Test Regular User</button>
            <button class="demo-button" onclick="clearUser()">Clear User (Logged Out)</button>
        </div>
        
        <div class="test-section">
            <h2>Avatar Examples</h2>
            <div class="avatar-demo">
                <span>Guest Avatar:</span>
                <img src="assets/avatars/guest.svg" alt="Guest Avatar" class="profile-pic">
            </div>
            <div class="avatar-demo">
                <span>Default Avatar:</span>
                <img src="assets/avatars/default.svg" alt="Default Avatar" class="profile-pic">
            </div>
            <div class="avatar-demo">
                <span>Google Profile Picture Example:</span>
                <img src="https://lh3.googleusercontent.com/a/ACg8ocK1234567890" alt="Google Avatar" class="profile-pic" 
                     onerror="this.src='assets/avatars/default.svg'">
            </div>
        </div>
        
        <div class="test-section">
            <h2>Expected Behavior</h2>
            <ul>
                <li><strong>Guest Users:</strong> Show custom guest avatar with user icon</li>
                <li><strong>Google Users:</strong> Show their Google profile picture, fallback to default if failed</li>
                <li><strong>Regular Users:</strong> Show default avatar</li>
                <li><strong>Logged Out:</strong> No avatar, only login button visible</li>
                <li><strong>Hover Effect:</strong> Username tooltip should appear on avatar hover</li>
                <li><strong>Mobile Responsive:</strong> Avatar should scale down on smaller screens</li>
            </ul>
        </div>
    </div>

    <script src="scripts/header-auth.js"></script>
    <script>
        function testGuestUser() {
            localStorage.setItem('typingTestUser', 'Guest User');
            localStorage.setItem('typingTestUserType', 'guest');
            localStorage.removeItem('typingTestUserData');
            location.reload();
        }
        
        function testGoogleUser() {
            localStorage.setItem('typingTestUser', 'John Doe');
            localStorage.setItem('typingTestUserType', 'google');
            localStorage.setItem('typingTestUserData', JSON.stringify({
                name: 'John Doe',
                email: 'john.doe@gmail.com',
                id: 'google123'
            }));
            location.reload();
        }
        
        function testGoogleUserWithAvatar() {
            localStorage.setItem('typingTestUser', 'Jane Smith');
            localStorage.setItem('typingTestUserType', 'google');
            localStorage.setItem('typingTestUserData', JSON.stringify({
                name: 'Jane Smith',
                email: 'jane.smith@gmail.com',
                id: 'google456',
                picture: 'https://lh3.googleusercontent.com/a/ACg8ocK1234567890'
            }));
            location.reload();
        }
        
        function testRegularUser() {
            localStorage.setItem('typingTestUser', 'Regular User');
            localStorage.setItem('typingTestUserType', 'regular');
            localStorage.removeItem('typingTestUserData');
            location.reload();
        }
        
        function clearUser() {
            localStorage.removeItem('typingTestUser');
            localStorage.removeItem('typingTestUserType');
            localStorage.removeItem('typingTestUserData');
            location.reload();
        }
        
        // Show current localStorage state
        console.log('Current localStorage state:');
        console.log('User:', localStorage.getItem('typingTestUser'));
        console.log('Type:', localStorage.getItem('typingTestUserType'));
        console.log('Data:', localStorage.getItem('typingTestUserData'));
    </script>
</body>
</html>
