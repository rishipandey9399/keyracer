<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge Navigation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif; 
            margin: 2rem;
            background: #1a1a1a;
            color: #fff;
        }
        .test-result {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .success {
            background: rgba(34, 197, 94, 0.1);
            border-color: #22c55e;
        }
        .error {
            background: rgba(248, 113, 113, 0.1);
            border-color: #f87171;
        }
        .test-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .test-link {
            display: block;
            padding: 1rem;
            background: #2a2a2a;
            border-radius: 8px;
            text-decoration: none;
            color: #00c2ff;
            border: 1px solid #444;
            transition: all 0.3s ease;
            text-align: center;
        }
        .test-link:hover {
            background: #333;
            border-color: #00c2ff;
        }
        h1 { color: #00ffdd; }
        h2 { color: #00c2ff; }
    </style>
</head>
<body>
    <h1>üß™ Challenge Navigation Test</h1>
    
    <div id="test-results"></div>
    
    <h2>üîó Test Links</h2>
    <p>Click these links to test that each challenge loads correctly:</p>
    
    <div class="test-links" id="test-links">
        <!-- Links will be generated dynamically -->
    </div>
    
    <script>
        async function testChallengeNavigation() {
            const resultsContainer = document.getElementById('test-results');
            const linksContainer = document.getElementById('test-links');
            
            try {
                // Load challenges data
                const response = await fetch('./scripts/challenges.json');
                const data = await response.json();
                
                resultsContainer.innerHTML += `
                    <div class="test-result success">
                        ‚úÖ Successfully loaded ${data.challenges.length} challenges from challenges.json
                    </div>
                `;
                
                // Generate test links for each challenge
                data.challenges.slice(0, 8).forEach(challenge => {
                    const testUrl = `python-challenges-enhanced.html?challenge=${challenge._id}`;
                    
                    linksContainer.innerHTML += `
                        <a href="${testUrl}" class="test-link" target="_blank">
                            <strong>Challenge ${challenge._id}: ${challenge.title}</strong><br>
                            <small>URL: ${testUrl}</small>
                        </a>
                    `;
                });
                
                // Test URL parameter parsing
                const testUrls = [
                    'python-challenges-enhanced.html?challenge=1',
                    'python-challenges-enhanced.html?challenge=2', 
                    'python-challenges-enhanced.html?challenge=3',
                    'python-challenges-enhanced.html?challenge=4'
                ];
                
                resultsContainer.innerHTML += `
                    <div class="test-result success">
                        ‚úÖ Generated test URLs:<br>
                        ${testUrls.map(url => `&nbsp;&nbsp;‚Ä¢ ${url}`).join('<br>')}
                    </div>
                `;
                
                // Verify _id field format
                const firstChallenge = data.challenges[0];
                if (firstChallenge._id) {
                    resultsContainer.innerHTML += `
                        <div class="test-result success">
                            ‚úÖ Challenge ID format correct: ${firstChallenge._id} (${typeof firstChallenge._id})
                        </div>
                    `;
                } else {
                    resultsContainer.innerHTML += `
                        <div class="test-result error">
                            ‚ùå Challenge _id field missing or invalid
                        </div>
                    `;
                }
                
            } catch (error) {
                resultsContainer.innerHTML += `
                    <div class="test-result error">
                        ‚ùå Error loading challenges: ${error.message}
                    </div>
                `;
            }
        }
        
        // Run test when page loads
        testChallengeNavigation();
    </script>
    
    <h2>üîô Navigation</h2>
    <a href="challenges.html" class="test-link" style="max-width: 200px;">
        ‚Üê Back to Challenges
    </a>
</body>
</html>
