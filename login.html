<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Racer - Login</title>
    
    <!-- Critical CSS for preloader and immediate visibility -->
    <style>
        :root {
            --primary-color: #FF4A4A;
            --secondary-color: #1E2761;
            --accent-color: #00FFDD;
            --background-color: #070B18;
            --highlight-color: #FFC700;
        }
        
        html, body {
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background-color);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }
        
        .preloader-hidden {
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }
        
        .loader {
            width: 80px;
            height: 80px;
            position: relative;
        }
        
        .loader:before {
            content: '';
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--primary-color);
            border-bottom-color: var(--accent-color);
            position: absolute;
            animation: spin 1s linear infinite;
        }
        
        .loader:after {
            content: '';
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-left-color: var(--highlight-color);
            border-right-color: var(--highlight-color);
            position: absolute;
            top: 10px;
            left: 10px;
            animation: spin 0.8s linear infinite reverse;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Hide preloader immediately if JS is disabled */
        .no-js #preloader {
            display: none;
        }
        
        /* Force immediate visibility for authentication forms */
        .auth-container, .logo-section, .auth-form {
            opacity: 1 !important;
            visibility: visible !important;
        }
    </style>
    
    <!-- Load JavaScript to immediately handle preloader -->
    <script>
        // Mark that JS is enabled
        document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
        
        // Hide preloader ASAP
        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            if (preloader && !preloader.classList.contains('preloader-hidden')) {
                preloader.classList.add('preloader-hidden');
                setTimeout(() => {
                    if (preloader.parentNode) {
                        preloader.parentNode.removeChild(preloader);
                    }
                }, 300);
            }
        }
        
        // Multiple triggers to ensure preloader is hidden
        document.addEventListener('DOMContentLoaded', hidePreloader);
        window.addEventListener('load', hidePreloader);
        setTimeout(hidePreloader, 1500); // Fallback
    </script>
    
    <!-- Google AdSense script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9511160987539177" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="loader"></div>
    </div>
    
    <!-- Racing car animations -->
    <div class="racing-car sports-car">
        <div class="headlights"></div>
        <div class="headlights right"></div>
            </div>
    <div class="racing-car formula" style="animation-delay: 2s; bottom: 120px;"></div>
    <div class="racing-car" style="animation-delay: 4s; bottom: 80px;">
        <div class="headlights"></div>
        <div class="headlights right"></div>
            </div>
    
    <div class="login-page">
        <div class="brand-section">
            <a href="index.html" class="brand">
                <img src="assets/images/logo.png" alt="Key Racer Logo" class="brand-logo">
                <h2 class="brand-tagline">The Ultimate Keyboard Racing Championship</h2>
            </a>
        </div>
        
        <div class="auth-container">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Register</button>
                <div class="tab-indicator"></div>
            </div>
            
            <div class="auth-forms">
                <!-- Login Form -->
                <form id="login-form" class="auth-form active">
                    <h1 class="form-title">Driver Login</h1>
                    
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <div class="input-with-icon">
                            <input type="email" id="login-email" required placeholder="Enter your email">
                            <i class="fas fa-envelope"></i>
                </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <div class="input-with-icon">
                            <input type="password" id="login-password" required placeholder="Enter your password">
                            <i class="fas fa-lock"></i>
                </div>
                    </div>
                    
                    <div class="form-options">
                        <label class="remember-option">
                            <input type="checkbox" id="remember-me">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" class="forgot-link">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="auth-btn">Sign In <i class="fas fa-sign-in-alt"></i></button>
                    
                    <button type="button" id="guest-btn" class="auth-btn guest-btn">Continue as Guest <i class="fas fa-user-secret"></i></button>
                    
                    <div class="social-login">
                        <div class="social-divider">
                            <span>or continue with</span>
                        </div>
                        <div class="social-buttons">
                            <button type="button" class="social-btn google">
                                <i class="fab fa-google"></i>
                            </button>
                            <button type="button" class="social-btn facebook">
                                <i class="fab fa-facebook-f"></i>
                            </button>
                            <button type="button" class="social-btn twitter">
                                <i class="fab fa-twitter"></i>
                            </button>
                    </div>
                    </div>
                </form>
                
                <!-- Register Form -->
                <form id="register-form" class="auth-form">
                    <h1 class="form-title">Join the Race</h1>
                    
                    <div class="form-group">
                        <label for="register-username">Username</label>
                        <div class="input-with-icon">
                            <input type="text" id="register-username" required placeholder="Choose a username">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <div class="input-with-icon">
                            <input type="email" id="register-email" required placeholder="Enter your email">
                            <i class="fas fa-envelope"></i>
                </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <div class="input-with-icon">
                            <input type="password" id="register-password" required placeholder="Create a password">
                            <i class="fas fa-lock"></i>
                    </div>
                </div>
                
                    <div class="form-group">
                        <label for="register-confirm">Confirm Password</label>
                        <div class="input-with-icon">
                            <input type="password" id="register-confirm" required placeholder="Confirm your password">
                            <i class="fas fa-lock"></i>
            </div>
        </div>
        
                    <div class="form-options">
                        <label class="remember-option">
                            <input type="checkbox" id="terms-agree" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="terms-conditions.html" class="terms-link">Terms & Conditions</a>
                        </label>
                </div>
                
                    <button type="submit" class="auth-btn">Create Account <i class="fas fa-user-plus"></i></button>
                    
                    <div class="social-login">
                        <div class="social-divider">
                            <span>or register with</span>
                </div>
                        <div class="social-buttons">
                            <button type="button" class="social-btn google">
                                <i class="fab fa-google"></i>
                            </button>
                            <button type="button" class="social-btn facebook">
                                <i class="fab fa-facebook-f"></i>
                            </button>
                            <button type="button" class="social-btn twitter">
                                <i class="fab fa-twitter"></i>
                            </button>
                </div>
            </div>
                </form>
            </div>
                </div>
                
        <div class="login-footer">
            <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Racing Track</a>
            <p class="copyright">Â© <span id="current-year"></span> Key Racer - The ultimate keyboard racing championship</p>
                </div>
            </div>
            
    <!-- Racing car animation -->
    <div class="racing-car-animation">
        <div class="car">
            <div class="car-body"></div>
            <div class="car-top"></div>
            <div class="car-stripe"></div>
            <div class="headlight left"></div>
            <div class="headlight right"></div>
            <div class="taillight"></div>
            <div class="wheel front"></div>
            <div class="wheel back"></div>
            <div class="exhaust">
                <div class="smoke"></div>
                <div class="smoke"></div>
                <div class="smoke"></div>
            </div>
        </div>
        <div class="road">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
    </div>
    
    <!-- Load CSS after critical rendering path -->
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/login.css">
    <link rel="stylesheet" href="styles/preloader.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Load scripts at the end -->
    <script src="scripts/database.js"></script>
    <script src="scripts/preloader.js"></script>
    <script src="scripts/login.js"></script>
    <script src="scripts/header-auth.js"></script>
</body>
</html>
