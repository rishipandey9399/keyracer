<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Racer - Login</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9511160987539177"
     crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/login.css">
    <link rel="stylesheet" href="styles/keyboard-links.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #111827;
            background-image: 
                linear-gradient(90deg, transparent 0%, transparent 49%, #FFD700 49%, #FFD700 51%, transparent 51%, transparent 100%),
                repeating-linear-gradient(0deg, #111827 0px, #111827 50px, rgba(50, 50, 50, 0.5) 50px, rgba(50, 50, 50, 0.5) 51px);
            background-size: 100px 100%, 100% 100px;
            background-position: center;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Rajdhani', 'Segoe UI', sans-serif;
            perspective: 1000px;
            animation: moveRoad 2s linear infinite;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 15px;
            background: repeating-linear-gradient(
                90deg,
                #FF4A4A 0px,
                #FF4A4A 20px,
                #1E2761 20px,
                #1E2761 40px
            );
            z-index: 1000;
        }
        
        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 15px;
            background: repeating-linear-gradient(
                90deg,
                #FF4A4A 0px,
                #FF4A4A 20px,
                #1E2761 20px,
                #1E2761 40px
            );
            z-index: 990;
        }
        
        @keyframes moveRoad {
            0% { background-position: 0 0; }
            100% { background-position: 0 100px; }
        }
        
        .container {
            transform-style: preserve-3d;
            perspective: 1000px;
            z-index: 1;
        }
        
        .logo-section {
            text-align: center;
            margin-bottom: 30px;
            animation: floatAnimation 6s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        
        @keyframes floatAnimation {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        .logo {
            font-size: 3.5rem;
            margin-bottom: 15px;
            background: linear-gradient(to right, #FF4A4A, #00FFDD, #FF4A4A);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(0, 255, 221, 0.5);
            transition: all 0.5s ease;
            display: inline-block;
            position: relative;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
            font-weight: 800;
            transform-style: preserve-3d;
            padding: 10px 25px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .logo::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, #FF4A4A, #00FFDD, #FF4A4A, #00FFDD);
            background-size: 400%;
            z-index: -1;
            filter: blur(10px);
            opacity: 0.7;
            animation: glowingBorder 15s linear infinite;
        }
        
        .logo::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(
                135deg, 
                rgba(255, 255, 255, 0) 20%, 
                rgba(255, 255, 255, 0.3) 40%, 
                rgba(255, 255, 255, 0) 60%
            );
            transform: translateY(100%) rotate(45deg);
            animation: shineEffect 8s infinite;
        }
        
        @keyframes glowingBorder {
            0% { background-position: 0 0; }
            50% { background-position: 400% 0; }
            100% { background-position: 0 0; }
        }
        
        @keyframes shineEffect {
            0% { transform: translateY(100%) rotate(45deg); }
            15% { transform: translateY(-100%) rotate(45deg); }
            100% { transform: translateY(-100%) rotate(45deg); }
        }
        
        .logo i {
            filter: drop-shadow(0 0 15px rgba(0, 255, 221, 0.8));
            transition: all 0.5s ease;
            margin-right: 15px;
            vertical-align: middle;
            transform: translateZ(20px);
        }
        
        .logo .race-flag {
            position: absolute;
            top: -15px;
            right: -25px;
            font-size: 1.8rem;
            transform: rotate(15deg) translateZ(20px);
            animation: waveFlag 3s ease-in-out infinite;
            color: #FFD700;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.7));
        }
        
        .logo .race-car {
            position: absolute;
            bottom: -10px;
            left: -30px;
            font-size: 1.5rem;
            animation: raceCar 5s linear infinite;
            color: #FF4A4A;
            filter: drop-shadow(0 0 10px rgba(255, 74, 74, 0.7));
            transform: translateZ(15px);
        }
        
        @keyframes waveFlag {
            0%, 100% { transform: rotate(15deg) translateZ(20px); }
            50% { transform: rotate(25deg) translateZ(20px); }
        }
        
        @keyframes raceCar {
            0% { transform: translateX(0) translateZ(15px); }
            50% { transform: translateX(150px) translateZ(15px); }
            100% { transform: translateX(0) translateZ(15px); }
        }
        
        .logo:hover {
            transform: translateY(-3px);
            text-shadow: 0 10px 25px rgba(0, 255, 221, 0.8);
        }
        
        .logo:hover i {
            transform: scale(1.1) translateZ(20px);
            color: #FF4A4A;
        }
        
        .app-version {
            display: inline-block;
            padding: 5px 12px;
            background-color: rgba(0, 255, 221, 0.1);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #00FFDD;
            margin-top: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 255, 221, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .app-version:hover {
            background-color: rgba(0, 255, 221, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 221, 0.3);
        }
        
        .footer-text {
            text-align: center;
            margin-top: 30px;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.7);
            animation: fadeIn 1s ease-out;
            animation-delay: 0.5s;
            animation-fill-mode: both;
            position: relative;
        }
        
        .footer-text p {
            margin: 5px 0;
            transition: all 0.3s ease;
        }
        
        .footer-text p:hover {
            color: #00FFDD;
            transform: translateY(-2px);
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: rgba(0, 255, 221, 0.3);
            border-radius: 50%;
            animation: particleFloat 15s infinite linear;
        }
        
        @keyframes particleFloat {
            0% { transform: translate(0, 0); opacity: 0; }
            20% { opacity: 0.5; }
            80% { opacity: 0.5; }
            100% { transform: translate(100px, -100px); opacity: 0; }
        }
        
        /* Button ripple effect */
        .btn-ripple {
            position: relative;
            overflow: hidden;
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(2.5);
                opacity: 0;
            }
        }
        
        .racing-car {
            position: fixed;
            width: 60px;
            height: 30px;
            background-color: #FF4A4A;
            border-radius: 5px;
            bottom: 50px;
            right: -60px;
            z-index: 5;
            animation: raceCarAcross 8s linear infinite;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .racing-car::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 10px;
            width: 40px;
            height: 15px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 5px 5px 0 0;
        }
        
        .racing-car::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 10px;
            width: 10px;
            height: 10px;
            background-color: #333;
            border-radius: 50%;
            box-shadow: 30px 0 0 #333;
        }
        
        @keyframes raceCarAcross {
            0% { 
                right: -60px;
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
            100% { 
                right: calc(100% + 60px);
                transform: translateY(0);
            }
        }
        
        /* Speedometer for login */
        .speedometer {
            width: 100px;
            height: 100px;
            background: #1E2761;
            border-radius: 50%;
            position: relative;
            margin: 0 auto 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2), 
                        inset 0 0 20px rgba(0, 0, 0, 0.3);
            border: 4px solid #3A4662;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .speedometer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: conic-gradient(
                #FF4A4A 0%, 
                #00FFDD 40%, 
                #4CAF50 70%,
                #00FFDD 100%
            );
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 0%, 50% 0%);
            opacity: 0.8;
            transform: rotate(-90deg);
            z-index: 1;
        }

        .speedometer::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border-radius: 50%;
            background: #1E2761;
            z-index: 2;
        }

        .speedometer-dial {
            width: 4px;
            height: 40px;
            background: linear-gradient(to top, #FF4A4A, #00FFDD);
            position: absolute;
            bottom: 50%;
            left: calc(50% - 2px);
            transform-origin: bottom center;
            z-index: 3;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(255, 74, 74, 0.5);
            animation: rotateDial 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) infinite alternate;
        }

        .speedometer-center {
            width: 12px;
            height: 12px;
            background: #00FFDD;
            border-radius: 50%;
            position: absolute;
            top: calc(50% - 6px);
            left: calc(50% - 6px);
            z-index: 4;
            box-shadow: 0 0 10px rgba(0, 255, 221, 0.5);
        }

        @keyframes rotateDial {
            0% { transform: rotate(-90deg); }
            100% { transform: rotate(90deg); }
        }
        
        /* Google Sign In Button */
        .google-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 10px 20px;
            background-color: #fff;
            color: #444;
            border-radius: 5px;
            border: thin solid #888;
            box-shadow: 1px 1px 1px grey;
            white-space: nowrap;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .google-btn:hover {
            background-color: #f5f5f5;
            transform: translateY(-2px);
        }
        
        .google-btn:active {
            transform: translateY(0);
        }
        
        .google-btn img {
            width: 18px;
            height: 18px;
            margin-right: 10px;
        }
        
        .google-btn-text {
            font-family: 'Roboto', sans-serif;
            font-size: 14px;
            font-weight: 500;
        }
        
        .keyboard-key::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #00FFDD;
            transition: width 0.3s ease;
        }
        
        .keyboard-key:hover::after {
            width: 100%;
        }
        
        /* Forgot Password Link Styling */
        .forgot-password-link {
            color: #00FFDD;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            position: relative;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .forgot-password-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #00FFDD;
            transition: width 0.3s ease;
        }
        
        .forgot-password-link:hover {
            color: #FF4A4A;
            transform: translateY(-2px);
        }
        
        .forgot-password-link:hover::after {
            width: 100%;
            background: #FF4A4A;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    <div class="racing-car"></div>
    
    <div class="container main-wrapper">
        <!-- 3D elements -->
        <div class="logo-section">
            <div class="logo">
                <i class="fas fa-keyboard"></i> KEY RACER
                <i class="fas fa-flag-checkered race-flag"></i>
                <i class="fas fa-car race-car"></i>
            </div>
            <div class="speedometer">
                <div class="speedometer-dial"></div>
                <div class="speedometer-center"></div>
            </div>
            <span class="app-version">Version 1.0</span>
        </div>
        
        <!-- Login section (3D) -->
        <div class="login-container">
            <div class="login-header">
                <h1>Key Racer</h1>
                <p>Race to improve your typing skills</p>
            </div>
            
            <div class="login-form">
                <h2>Sign In</h2>
                <div class="input-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username">
                </div>
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <div class="form-footer" style="text-align: right;">
                    <a href="/forgot-password.html" class="forgot-password-link">Forgot Password?</a>
                </div>
                <button id="login-btn" class="primary-btn btn-ripple">Sign In</button>
                
                <!-- Google Sign-In Button -->
                <button id="google-signin-btn" class="google-btn btn-ripple" data-auth-method="google" onclick="window.googleSignIn()">
                    <img src="assets/google-logo.svg" alt="Google" width="18" height="18">
                    <span class="google-btn-text">Sign in with Google</span>
                </button>
                
                <!-- Debug button with the old call -->
                <button onclick="window.handleGoogleSignIn()" style="display:none; background-color: #4a4a4a; color: white; padding: 5px 10px; margin-top: 5px; font-size: 12px; border: none; border-radius: 3px; cursor: pointer;">
                    DEBUG: Old Google Sign-In
                </button>
                
                <div class="separator">
                    <span>OR</span>
                </div>
                
                <button id="register-btn" class="secondary-btn btn-ripple">Create Account</button>
                <button id="guest-btn" class="accent-btn btn-ripple">Continue as Guest</button>
                
                <div id="login-message" class="message"></div>
                
                <!-- Forgot Password Form (hidden by default) -->
                <div id="forgot-password-form" style="display: none;">
                    <h3>Reset Your Password</h3>
                    <p class="form-description">Enter your username or email address and we'll send you instructions to reset your password.</p>
                    <div class="input-group">
                        <label for="reset-email">Username or Email</label>
                        <input type="text" id="reset-email" placeholder="Enter your username or email">
                    </div>
                    <button id="reset-btn" class="accent-btn btn-ripple">Send Reset Link</button>
                    <button id="back-to-login-btn" class="secondary-btn btn-ripple">Back to Login</button>
                </div>
                
                <!-- Registration Form (hidden by default) -->
                <div id="registration-form" style="display: none;">
                    <h3>Create Your Account</h3>
                    <div class="input-group">
                        <label for="reg-username">Username</label>
                        <input type="text" id="reg-username" placeholder="Choose a username">
                    </div>
                    <div class="input-group">
                        <label for="reg-email">Email</label>
                        <input type="email" id="reg-email" placeholder="Enter your email">
                    </div>
                    <div class="input-group">
                        <label for="reg-password">Password</label>
                        <input type="password" id="reg-password" placeholder="Create a password">
                    </div>
                    <div class="input-group">
                        <label for="reg-confirm-password">Confirm Password</label>
                        <input type="password" id="reg-confirm-password" placeholder="Confirm your password">
                    </div>
                    <button id="register-submit-btn" class="accent-btn btn-ripple">Create Account</button>
                    <button id="back-to-login-btn-reg" class="secondary-btn btn-ripple">Back to Login</button>
                </div>
                
                <!-- Email Verification Form (hidden by default) -->
                <div id="verification-form" style="display: none;">
                    <h3>Email Verification</h3>
                    <p>We've sent a verification code to <strong id="verification-email">your email</strong></p>
                    <p class="verification-note">Please check your inbox. A verification code has been sent from <strong>customerkeyracer@gmail.com</strong></p>
                    <div class="input-group">
                        <label for="verification-code">Verification Code</label>
                        <input type="text" id="verification-code" placeholder="Enter the 6-digit code">
                    </div>
                    <button id="verify-btn" class="accent-btn btn-ripple">Verify Email</button>
                    <p><a href="#" id="resend-code">Resend code</a></p>
                </div>
                
                <!-- Reset Password Form (hidden by default) -->
                <div id="reset-password-form" style="display: none;">
                    <h3>Create New Password</h3>
                    <p>Enter a new password for your account.</p>
                    <div class="input-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" placeholder="Enter new password">
                    </div>
                    <div class="input-group">
                        <label for="confirm-new-password">Confirm Password</label>
                        <input type="password" id="confirm-new-password" placeholder="Confirm new password">
                    </div>
                    <button id="update-password-btn" class="accent-btn btn-ripple">Update Password</button>
                    <button id="back-to-login-btn-reset" class="secondary-btn btn-ripple">Back to Login</button>
                </div>
                
                <div class="speedometer-container"></div>
            </div>
        </div>
        
        <!-- Complete visual separation between login and content -->
        <div class="section-divider"></div>
        
        <!-- Non-3D elements start here -->
        <div class="login-info-section non-3d" style="margin-bottom: 100px; transform-style: flat; perspective: none;">
            <h2 class="keyboard-heading">Why Create an Account?</h2>
            
            <div class="info-boxes">
                <div class="info-box keyboard-box">
                    <div class="icon"><i class="fas fa-chart-line"></i></div>
                    <h3>Track Your Progress</h3>
                    <p>With a Key Racer account, every practice session is recorded. View detailed charts and statistics showing your improvement over time. Identify patterns in your typing and focus on areas that need improvement.</p>
                </div>
                
                <div class="info-box keyboard-box">
                    <div class="icon"><i class="fas fa-trophy"></i></div>
                    <h3>Compete on Leaderboards</h3>
                    <p>Join the global community of typists and see where you rank. Compete with others based on speed, accuracy, and completion time. Set personal goals to climb the rankings and challenge yourself.</p>
                </div>
                
                <div class="info-box keyboard-box">
                    <div class="icon"><i class="fas fa-brain"></i></div>
                    <h3>Personalized AI Feedback</h3>
                    <p>Receive tailored recommendations based on your typing patterns. Our advanced AI analyzes your performance to provide specific tips that address your unique challenges and help you improve faster.</p>
                </div>
                
                <div class="info-box keyboard-box">
                    <div class="icon"><i class="fas fa-save"></i></div>
                    <h3>Save Your Preferences</h3>
                    <p>Your account remembers your preferred settings, themes, and difficulty levels. Pick up exactly where you left off each time you return to Key Racer, with all your customizations intact.</p>
                </div>
            </div>
            
            <div class="typing-facts keyboard-box">
                <h3>Did You Know?</h3>
                <ul>
                    <li><span class="fact-highlight">The average typing speed</span> worldwide is approximately 40 words per minute (WPM).</li>
                    <li>The <span class="fact-highlight">world record</span> for typing speed is over 200 WPM, achieved by professional typists after years of practice.</li>
                    <li>Just <span class="fact-highlight">15 minutes of daily practice</span> can increase your typing speed by 15-20 WPM within a month.</li>
                    <li>Improving from 30 WPM to 60 WPM can <span class="fact-highlight">save up to 35 working days</span> per year for professionals who type regularly.</li>
                    <li>The QWERTY keyboard layout was originally designed to <span class="fact-highlight">prevent typewriter jams</span>, not to optimize typing speed.</li>
                </ul>
            </div>
            
            <!-- FAQ Section -->
            <h2 class="keyboard-heading">Frequently Asked Questions</h2>
            
            <div class="faq-container">
                <div class="faq-item keyboard-box">
                    <h3>How do I reset my password?</h3>
                    <p>If you've forgotten your password, click on the "Forgot Password" link on the login screen. Enter your registered email address, and we'll send you instructions to reset your password. For security reasons, password reset links expire after 24 hours.</p>
                </div>
                
                <div class="faq-item keyboard-box">
                    <h3>Can I use Key Racer on mobile devices?</h3>
                    <p>Yes! Key Racer is optimized for both desktop and mobile devices. However, for the best typing experience and accuracy, we recommend using a physical keyboard when possible. Mobile users can still access all features, though the interface is adjusted for touch input.</p>
                </div>
                
                <div class="faq-item keyboard-box">
                    <h3>Is my typing data saved when I use guest mode?</h3>
                    <p>When using guest mode, your typing statistics are only stored temporarily in your browser's local storage. They will be lost if you clear your browser data or switch to a different device. For permanent data storage and access to your progress history, we recommend creating a free account.</p>
                </div>
                
                <div class="faq-item keyboard-box">
                    <h3>How is my Words Per Minute (WPM) calculated?</h3>
                    <p>Your WPM is calculated by dividing the total number of characters typed (including spaces) by 5 (the average word length), then dividing by the time taken in minutes. For example, if you type 1000 characters in 5 minutes, your WPM would be 1000 รท 5 รท 5 = 40 WPM.</p>
                </div>
            </div>
            
            <!-- Footer keyboard links at the bottom of the page -->
            <div class="footer-links-container non-3d">
                <div class="keyboard-quote">Challenge yourself and race to the top of the leaderboard</div>
                <div class="keyboard-links">
                    <a href="about.html" class="keyboard-key">About Us</a>
                    <a href="privacy-policy.html" class="keyboard-key">Privacy Policy</a>
                    <a href="terms-conditions.html" class="keyboard-key">Terms & Conditions</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add console log to check script loading -->
    <script>
        console.log('Login page loaded');
        
        // Create floating particles
        document.addEventListener('DOMContentLoaded', function() {
            const particlesContainer = document.getElementById('particles');
            const numberOfParticles = 10;
            
            for (let i = 0; i < numberOfParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random positions
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                
                // Random sizes
                const size = Math.random() * 4 + 2;
                
                // Random opacity
                const opacity = Math.random() * 0.3 + 0.1;
                
                // Random animation duration and delay
                const duration = Math.random() * 10 + 15;
                const delay = Math.random() * 5;
                
                // Set styles
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.opacity = opacity;
                particle.style.animationDuration = `${duration}s`;
                particle.style.animationDelay = `${delay}s`;
                
                // Randomize colors between accent and primary
                if (Math.random() > 0.5) {
                    particle.style.backgroundColor = 'rgba(0, 255, 221, 0.3)';
                } else {
                    particle.style.backgroundColor = 'rgba(255, 74, 74, 0.3)';
                }
                
                particlesContainer.appendChild(particle);
            }
            
            // Add ripple effect to buttons
            const rippleButtons = document.querySelectorAll('.btn-ripple');
            
            rippleButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const rect = button.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    
                    button.appendChild(ripple);
                    
                    // Remove ripple after animation completes
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // 3D tilt effect for login container - optimized with throttling
            const loginContainer = document.querySelector('.login-container');
            const maxRotate = 3;
            let lastUpdate = 0;
            const throttleTime = 50;
            
            document.addEventListener('mousemove', function(e) {
                const now = Date.now();
                if (now - lastUpdate < throttleTime) return;
                lastUpdate = now;
                
                if (!loginContainer) return;
                
                const rect = loginContainer.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const percentX = (e.clientX - centerX) / (window.innerWidth / 2);
                const percentY = (e.clientY - centerY) / (window.innerHeight / 2);
                
                const rotateY = -maxRotate * percentX;
                const rotateX = maxRotate * percentY;
                
                loginContainer.style.transform = `translateY(-5px) perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
            
            // Reset transform when mouse leaves
            document.addEventListener('mouseleave', function() {
                if (!loginContainer) return;
                loginContainer.style.transform = `translateY(-5px) perspective(1000px) rotateX(0deg) rotateY(0deg)`;
            });
            
            // Add racing cars - reduced count
            const numberOfCars = 2;
            
            for (let i = 0; i < numberOfCars; i++) {
                const car = document.createElement('div');
                car.classList.add('racing-car');
                
                // Random positions and delays
                const bottom = 30 + Math.random() * 50;
                const delay = Math.random() * 5;
                const duration = 12 + Math.random() * 7;
                
                // Set styles
                car.style.bottom = `${bottom}px`;
                car.style.animationDelay = `${delay}s`;
                car.style.animationDuration = `${duration}s`;
                
                // Randomize colors
                if (Math.random() > 0.5) {
                    car.style.backgroundColor = '#FF4A4A';
                } else {
                    car.style.backgroundColor = '#00FFDD';
                }
                
                document.body.appendChild(car);
            }
        });
    </script>
    
    <script src="scripts/database.js"></script>
    <script src="scripts/api.js"></script>
    <script>
        // Check if database script loaded
        console.log('Database script loaded', window.typingDB ? 'Successfully' : 'Failed');
    </script>
    <script src="scripts/login.js"></script>
    <script src="scripts/google-auth.js"></script>
    <script>
        // Fallback for guest mode if the main login doesn't work
        document.getElementById('guest-btn').addEventListener('click', function() {
            console.log('Guest fallback triggered');
            const guestId = 'guest_' + Date.now();
            localStorage.setItem('typingTestUser', guestId);
            localStorage.setItem('typingTestUserType', 'guest');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 100);
        });
    </script>
</body>
</html>
